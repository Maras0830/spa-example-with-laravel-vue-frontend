webpackJsonp([1],{10:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return i});var s="POSTS_LIST",a="AUTH_USER",i="POSTS_REPLY_LIST"},108:function(t,e){},109:function(t,e){},110:function(t,e){},111:function(t,e){},124:function(t,e,n){n(111);var s=n(16)(n(62),n(130),"data-v-d1a58bfa",null);t.exports=s.exports},125:function(t,e,n){n(109);var s=n(16)(n(63),n(128),"data-v-2d4225cc",null);t.exports=s.exports},126:function(t,e,n){n(110);var s=n(16)(n(64),n(129),"data-v-3409985f",null);t.exports=s.exports},127:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{"max-width":t.screenWidth+"px"},attrs:{id:"app"}},[n("div",{attrs:{id:"rwdBtn"}},[n("div",{staticClass:"btn blank"}),t._v(" "),n("div",{staticClass:"btn xl",class:{actived:"xl"===t.nowRwd,twinkle:"xl"===t.twinkle},on:{click:function(e){t.screenSize("xl")}}},[t._v("Large")]),t._v(" "),n("div",{staticClass:"btn md",class:{actived:"md"===t.nowRwd||"xl"===t.nowRwd,twinkle:"md"===t.twinkle},on:{click:function(e){t.screenSize("md")}}},[t._v("Medium")]),t._v(" "),n("div",{staticClass:"btn sm",class:{actived:"sm"===t.nowRwd||"md"===t.nowRwd||"xl"===t.nowRwd,twinkle:"sm"===t.twinkle},on:{click:function(e){t.screenSize("sm")}}},[t._v("Small")]),t._v(" "),n("div",{staticClass:"btn md",class:{actived:"md"===t.nowRwd||"xl"===t.nowRwd,twinkle:"md"===t.twinkle},on:{click:function(e){t.screenSize("md")}}},[t._v("Medium")]),t._v(" "),n("div",{staticClass:"btn xl",class:{actived:"xl"===t.nowRwd,twinkle:"xl"===t.twinkle},on:{click:function(e){t.screenSize("xl")}}},[t._v("Large")]),t._v(" "),n("div",{staticClass:"btn blank"})]),t._v(" "),n("router-view")],1)},staticRenderFns:[]}},128:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-form"},[n("h1",[t._v("Log In")]),n("form",{attrs:{method:"POST"},on:{submit:function(e){e.preventDefault(),t.submitLogin({email:t.email,password:t.password})}}},[n("div",[n("label",{attrs:{for:"email"}},[t._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",id:"email",placeholder:"email",name:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",[n("label",{attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"password",name:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Log in ")])])])},staticRenderFns:[]}},129:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-list"},[n("div",{staticClass:"post-wrap"},[n("div",{staticClass:"post",on:{click:function(e){t.commentsToggle=!t.commentsToggle}}},[n("div",{staticClass:"content-wrap"},[n("img",{staticClass:"avatar",attrs:{src:"https://randomuser.me/api/portraits/women/"+(t.index+56)+".jpg"}}),n("div",{staticClass:"content-right"},[n("div",{staticClass:"name"},[t._v(t._s(t.post.author.data.name)),n("span",{staticClass:"time"},[t._v(t._s(t.post.time_ago))])]),n("div",{staticClass:"content"},[t._v(t._s(t.post.content))])])]),n("div",{staticClass:"extra-btn"},[n("div",{staticClass:"heart function-btn fa fa-heart"},[t._v("Heart")]),n("div",{staticClass:"comment function-btn fa fa-comment"},[t._v("Comment ( "+t._s(t.commentCounts)+" )")]),n("div",{staticClass:"reply function-btn fa fa-reply"},[t._v("Share")])])]),n("div",{staticClass:"comments-wrap",class:{hide:t.commentsToggle}},t._l(t.post.comments.data,function(e,s){return n("div",{staticClass:"comments"},[n("div",{staticClass:"content-wrap"},[s%2==0?n("img",{staticClass:"avatar",attrs:{src:"https://randomuser.me/api/portraits/men/"+(s+20)+".jpg"}}):n("img",{staticClass:"avatar",attrs:{src:"https://randomuser.me/api/portraits/women/"+(s+17)+".jpg"}}),n("div",{staticClass:"content-right"},[n("div",{staticClass:"name"},[t._v(t._s(e.author.data.name)),n("span",{staticClass:"time"},[t._v(" "+t._s(e.time_ago))])]),n("div",{staticClass:"content"},[t._v(" "+t._s(e.content))]),t._m(0,!0)])])])})),n("div",{staticClass:"comments-wrap",class:{sending:t.replyCacheSubmited}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.replyCacheSubmited,expression:"replyCacheSubmited"}],staticClass:"comments"},[n("div",{staticClass:"content-wrap"},[t.index%2==0?n("img",{staticClass:"avatar",attrs:{src:"https://randomuser.me/api/portraits/men/"+(t.index+20)+".jpg"}}):n("img",{staticClass:"avatar",attrs:{src:"https://randomuser.me/api/portraits/women/"+(t.index+17)+".jpg"}}),n("div",{staticClass:"content-right"},[t._m(1),n("div",{staticClass:"content"},[t._v(" "+t._s(t.replyCache))]),t._m(2)])])]),n("div",{staticClass:"reply-wrap"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyCache,expression:"replyCache"}],staticClass:"reply-textarea",attrs:{disabled:t.replyCacheSubmited},domProps:{value:t.replyCache},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.submitReply(t.post.id)},input:function(e){e.target.composing||(t.replyCache=e.target.value)}}},[t._v("13")]),n("button",{staticClass:"send-btn",attrs:{disabled:t.replyCacheSubmited},on:{click:function(e){e.stopPropagation(),t.submitReply(t.post.id)}}},[t._v("send")])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"extra-btn"},[n("div",{staticClass:"heart function-btn"},[t._v("Heart")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"name"},[t._v("Author"),n("span",{staticClass:"time"},[t._v("just now")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"extra-btn"},[n("div",{staticClass:"heart function-btn"},[t._v("Heart")])])}]}},130:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-list"},[n("button",{directives:[{name:"show",rawName:"v-show",value:t.isUserLogin,expression:"isUserLogin"}],staticStyle:{position:"fixed",right:"0",top:"0"},on:{click:function(e){e.stopPropagation(),t.logout()}}},[t._v("logout")]),t._l(t.getPostsList,function(t,e){return n("post-item",{attrs:{post:t,index:e,commentCounts:t.comments.data.length}})})],2)},staticRenderFns:[]}},48:function(t,e,n){"use strict";var s=n(18),a=n(131),i=n(124),r=n.n(i),o=n(125),c=n.n(o);s.a.use(a.a),e.a=new a.a({mode:"history",routes:[{path:"/",name:"Hello",component:r.a},{path:"/login",name:"Login",component:c.a}]})},49:function(t,e,n){"use strict";var s=n(18),a=n(17),i=n(60),r=n(57);s.a.use(a.c);var o=new a.c.Store({modules:{posts:i.a,auth:r.a},strict:!1});e.a=o},50:function(t,e,n){n(108);var s=n(16)(n(61),n(127),null,null);t.exports=s.exports},52:function(t,e,n){"use strict";var s=window.Promise||n(44),a=n(45)(n(46),s),i=n.i({NODE_ENV:"production"}).API_END_POINT,r=i+"/login",o=i+"/me",c=function(t){var e=JSON.parse(t.text);return s.resolve(e)},u=function(t){var e=JSON.parse(t.text);return s.resolve(e.data)},l=function(t){var e=JSON.parse(t.response.text);if(e instanceof Array){var n=[];for(var a in e)n.push(e[a][0]);e.error=n}return s.reject({status:"err",messages:e.error})};e.a={API_END_POINT:i,post:function(t,e){return a.post(r).send({email:t,password:e}).end().then(c,l)},get:function(t){return a.get(o).set("Authorization","Bearer "+t).set("Accept","application/json").end().then(u,l)}}},53:function(t,e,n){"use strict";var s=window.Promise||n(44),a=n(45)(n(46),s),i=n.i({NODE_ENV:"production"}).API_END_POINT,r=i+"/posts",o=function(t){var e=JSON.parse(t.text);return s.resolve(e.data)},c=function(t){var e=JSON.parse(t.response.text);if(e instanceof Array){var n=[];for(var a in e)n.push(e[a][0]);e.error=n}return s.reject({status:"err",messages:e.error})};e.a={API_END_POINT:i,get:function(t){return a.get(r).query(t).end().then(o,c)},postReply:function(t,e,n){return a.post(r+"/"+n+"/comments").send({title:e,content:e}).set("Authorization","Bearer "+t).set("Accept","application/json").end().then(o,c)}}},54:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(18),a=n(50),i=n.n(a),r=n(48),o=n(49);s.a.config.productionTip=!1,new s.a({el:"#app",store:o.a,router:r.a,template:"<App/>",components:{App:i.a}})},55:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"submitLogin",function(){return o}),n.d(e,"getAuthUser",function(){return c});var s=n(31),a=n.n(s),i=n(52),r=n(10),o=function(t,e){var n=t.commit;t.rootState;return i.a.post(e.email,e.password).then(function(t){return n(r.a,t.user),localStorage.setItem("spaUserToken",t.token),localStorage.setItem("spaUserTTL",t.token_ttl),t},function(t){return a.a.reject(t)})},c=function(t,e){var n=t.commit;t.rootState;return i.a.get(e).then(function(t){return n(r.a,t),t},function(t){return a.a.reject(t)})}},56:function(t,e,n){"use strict";function s(t){return t.user}function a(t){return r()(t.user).length>0}Object.defineProperty(e,"__esModule",{value:!0}),e.getAuthUser=s,e.isUserLogin=a;var i=n(66),r=n.n(i)},57:function(t,e,n){"use strict";var s=n(32),a=n.n(s),i=n(55),r=n(56),o=n(10),c={user:{}},u=a()({},o.a,function(t,e){t.user=e});e.a={state:c,getters:r,actions:i,mutations:u}},58:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"fetchPostsList",function(){return o}),n.d(e,"postReply",function(){return c});var s=n(31),a=n.n(s),i=n(53),r=n(10),o=function(t,e){var n=t.commit;t.rootState;return i.a.get(e).then(function(t){return n(r.b,t),t},function(t){return a.a.reject(t)})},c=function(t,e){var n=t.commit;t.rootState;return i.a.postReply(e.accessToken,e.content,e.postId).then(function(t){return n(r.c,t),t},function(t){return a.a.reject(t)})}},59:function(t,e,n){"use strict";function s(t){return t.list}Object.defineProperty(e,"__esModule",{value:!0}),e.getPostsList=s},60:function(t,e,n){"use strict";var s,a=n(32),i=n.n(a),r=n(58),o=n(59),c=n(10),u={list:{},replay_list:{}},l=(s={},i()(s,c.b,function(t,e){t.list=e}),i()(s,c.c,function(t,e){t.replay_list=e}),s);e.a={state:u,getters:o,actions:r,mutations:l}},61:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",data:function(){return{screenWidth:700,nowRwd:"md",twinkle:"md"}},methods:{screenSize:function(t){"xl"===t?this.screenWidth=1024:"md"===t?this.screenWidth=700:"sm"===t&&(this.screenWidth=480),this.nowRwd=t,this.twinkle=t}}}},62:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(19),a=n.n(s),i=n(17),r=n(126),o=n.n(r);e.default={name:"hello",beforeRouteEnter:function(t,e,n){n(function(t){t.getAuthUser(localStorage.getItem("spaUserToken"))})},components:{"post-item":o.a},data:function(){return{}},computed:n.i(i.a)(["getPostsList","isUserLogin"]),methods:a()(n.i(i.b)(["fetchPostsList","getAuthUser"]),{logout:function(){window.localStorage.clear(),window.location="/login"}}),created:function(){this.fetchPostsList()}}},63:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(19),a=n.n(s),i=n(17);e.default={name:"login",beforeRouteEnter:function(t,e,n){n(function(t){"string"==typeof localStorage.getItem("spaUserToken")&&t.getAuthUser(localStorage.getItem("spaUserToken")).then(function(){t.$router.push("/")},function(){localStorage.clear(),alert("請重新登入")})})},data:function(){return{email:"maraschen@codingweb.tw",password:"123456"}},computed:n.i(i.a)(["getPostsList","isUserLogin"]),watch:{isUserLogin:function(){this.getAuthUser(localStorage.getItem("spaUserToken")).then(function(t){console.log(this),window.location.href="/"}),console.log("isLogin func")}},methods:a()(n.i(i.b)(["submitLogin","getAuthUser"]),{})}},64:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(67),a=n.n(s),i=n(17);e.default={props:{post:{type:[Object,Array]},index:{type:Number},commentCounts:{type:Number}},data:function(){return{commentsToggle:!0,replyCache:"",replyCacheSubmited:!1}},methods:a()({},n.i(i.b)(["postReply","fetchPostsList"]),{submitReply:function(t){var e=this;this.replyCacheSubmited=!0;var n={accessToken:localStorage.getItem("spaUserToken"),content:this.replyCache,postId:t};this.postReply(n).then(function(t){e.fetchPostsList().then(function(t){e.replyCache="",e.replyCacheSubmited=!1})})}})}}},[54]);
//# sourceMappingURL=app.4211f1eb31904e68d89b.js.map